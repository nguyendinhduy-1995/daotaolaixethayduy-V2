# 01 – Feature Catalog (Danh mục tính năng)

> **Mục đích**: Liệt kê 100% tính năng của hệ thống Thầy Duy CRM, phân loại theo module, liên kết UI → API → DB → RBAC.

## Bảng danh mục tính năng

| ID | Tên tính năng | Mục đích | Roles | Entry Points (URL) | API liên quan | DB Models | Trạng thái | Module |
|----|--------------|----------|-------|-------------------|--------------|-----------|-----------|--------|
| F01 | [Auth & Session](features/auth-session.md) | Đăng nhập / đăng xuất / phân quyền phiên làm việc | All | `/login` | `/api/auth/*` | User, PermissionGroup, PermissionRule, UserPermissionOverride | Done | Auth |
| F02 | [Leads Pipeline](features/leads-pipeline.md) | Quản lý khách hàng qua pipeline trạng thái | Admin, Manager, Telesales, Direct Page | `/leads`, `/leads/board` | `/api/leads`, `/api/leads/{id}`, `/api/leads/assign`, `/api/leads/auto-assign`, `/api/leads/bulk-assign`, `/api/leads/stale`, `/api/leads/export`, `/api/leads/unassigned-count` | Lead, LeadMessage | Done | CRM |
| F03 | [Lead Events Logging](features/lead-events-logging.md) | Ghi nhật ký sự kiện khách hàng (gọi, hẹn, chuyển trạng thái) | Admin, Manager, Telesales | `/leads/{id}` (detail) | `/api/leads/{id}/events` | LeadEvent | Done | CRM |
| F04 | [KPI Daily](features/kpi-daily.md) | Tổng hợp KPI phần trăm theo ngày và luỹ kế tháng | All (view) | `/kpi` | `/api/kpi/daily`, `/api/kpi/targets` | KpiTarget, Lead, Receipt, Student | Done | KPI |
| F05 | [Goals Management](features/goals-management.md) | Đặt mục tiêu doanh thu / hồ sơ / chi phí theo ngày/tháng | Admin, Manager | `/goals` | `/api/goals` | GoalSetting | Done | KPI |
| F06 | [AI KPI Coach](features/ai-kpi-coach.md) | Gợi ý công việc AI dựa trên dữ liệu KPI, pipeline | All (view), Admin/Manager (create) | `/ai` | `/api/ai/suggestions`, `/api/ai/suggestions/ingest`, `/api/ai/suggestions/{id}/feedback`, `/api/ai/suggestions/analytics`, `/api/ai/suggestions/summary`, `/api/ai/suggestions/trend` | AiSuggestion, AiSuggestionFeedback, AiLearningHistory | Done | AI |
| F07 | [Users & Admin Management](features/users-admin.md) | Quản lý tài khoản nhân sự, phân quyền RBAC | Admin | `/admin/users`, `/admin/phan-quyen` | `/api/admin/users`, `/api/users`, `/api/admin/permission-groups`, `/api/admin/users/{id}/permission-overrides` | User, PermissionGroup, PermissionRule, UserPermissionOverride | Done | Admin |
| F08 | [Student / Course / Schedule](features/student-course-schedule.md) | Quản lý học viên, khoá học, lịch học, điểm danh | Admin, Manager, Telesales | `/students`, `/courses`, `/schedule` | `/api/students`, `/api/courses`, `/api/schedule`, `/api/schedule/{id}/attendance` | Student, Course, CourseScheduleItem, AttendanceSession, AttendanceRecord, AttendanceAudit, Instructor, PracticalLesson, StudentExamPlan | Done | Academic |
| F09 | [Receipts & Tuition](features/receipts-tuition.md) | Nhập phiếu thu, quản lý học phí, bảng giá | Admin, Manager, Telesales | `/receipts`, `/admin/tuition-plans` | `/api/receipts`, `/api/receipts/summary`, `/api/tuition-plans`, `/api/public/tuition-plans` | Receipt, TuitionPlan, Student | Done | Finance |
| F10 | [Expenses & Finance](features/expenses-finance.md) | Nhập chi phí ngày, tổng hợp tháng, lương cơ bản, insight AI | Admin, Manager | `/expenses` | `/api/expenses/daily`, `/api/expenses/summary`, `/api/expenses/base-salary`, `/api/insights/expenses`, `/api/insights/expenses/ingest` | BranchExpenseDaily, ExpenseCategory, BranchBaseSalary, ExpenseInsight | Done | Finance |
| F11 | [Outbound Messaging](features/outbound-messaging.md) | Hàng đợi gửi tin Zalo/FB/SMS/Call, worker dispatch | Admin, Manager, Telesales | `/outbound` | `/api/outbound/messages`, `/api/outbound/dispatch`, `/api/outbound/jobs`, `/api/outbound/callback` | OutboundMessage, OutboundJob, MessageTemplate | Done | Messaging |
| F12 | [Notifications & Tasks](features/notifications-tasks.md) | Sinh thông báo nghiệp vụ, danh sách việc cần làm | All | `/notifications` | `/api/notifications`, `/api/notifications/generate`, `/api/tasks` | Notification, NotificationRule | Done | Notification |
| F13 | [Automation & N8N](features/automation-n8n.md) | Tự động hoá quy trình (cron daily, workflow N8N, logs) | Admin | `/automation/logs`, `/automation/run`, `/admin/cron`, `/admin/n8n`, `/admin/automation-monitor` | `/api/automation/logs`, `/api/automation/run`, `/api/admin/cron/daily`, `/api/admin/worker/outbound`, `/api/admin/automation/*`, `/api/admin/n8n/workflows` | AutomationLog, OutboundJob, OutboundMessage | Done | Automation |
| F14 | [HR & Payroll](features/hr-payroll.md) | Chấm công, hồ sơ lương, hoa hồng, quản lý kỳ lương | Admin, Manager (view) | `/hr/kpi`, `/hr/attendance`, `/hr/payroll` | `/api/admin/attendance`, `/api/admin/salary-profiles`, `/api/admin/payroll`, `/api/admin/commissions`, `/api/admin/employee-kpi`, `/api/me/payroll` | Attendance, SalaryProfile, CommissionScheme, CommissionLedger, PayrollRun, PayrollItem, EmployeeKpiSetting, OpsPulse | Done | HR |
| F15 | [Marketing Reports](features/marketing-reports.md) | Báo cáo chi phí Meta Ads, CPL, tin nhắn, metrics | Admin, Manager | `/marketing` | `/api/admin/marketing/reports`, `/api/marketing/ingest`, `/api/marketing/metrics` | MarketingReport | Done | Marketing |
| F16 | [Student Portal](features/student-portal.md) | Cổng học viên: xem lịch, tài chính, nội dung hướng dẫn | Student | `/student`, `/student/schedule`, `/student/finance`, `/student/content` | `/api/student/me`, `/api/student/auth/*`, `/api/student/content` | Student, StudentAccount, StudentContent, Receipt | Done | Portal |
| F17 | [Landing Page](features/landing-page.md) | Trang giới thiệu, form đăng ký nhanh, bảng học phí công khai | Public | `/` | `/api/public/lead`, `/api/public/tuition-plans` | Lead, TuitionPlan | Done | Marketing |
| F18 | [Admin Ops Tools](features/admin-ops-tools.md) | Công cụ vận hành: branches, scheduler, tracking codes, student content, QA report | Admin | `/admin/branches`, `/admin/scheduler`, `/admin/tracking`, `/admin/student-content`, `/admin/qa`, `/admin/ops`, `/admin/instructors` | `/api/admin/branches`, `/api/admin/scheduler/health`, `/api/admin/tracking-codes`, `/api/admin/student-content`, `/api/admin/qa`, `/api/admin/ops/pulse`, `/api/instructors` | Branch, TrackingCode, StudentContent, Instructor, IdempotencyRequest, PushSubscription | Done | Admin |
| F19 | [App Learning Progress](features/app-learning-progress.md) | Đồng bộ tiến trình học lý thuyết từ PWA vào CRM | Admin (view), Service (write) | `/students/{id}` (app progress tab) | `/api/student-progress/daily`, `/api/student-progress/attempt`, `/api/student-progress/ai-summary`, `/api/student-progress/events`, `/api/students/{id}/app-progress` | AppDailySnapshot, AppAttemptSummary, AppAiSummary, AppEventLog | Done | Integration |

## Thống kê

- **Tổng số tính năng**: 19
- **100% Done**: Tất cả module đã hoàn thành
- **Tổng API endpoints**: ~85+ (xem chi tiết tại [02-API-MAP.md](02-API-MAP.md))
- **Tổng DB models**: 36 (xem chi tiết tại [03-DB-SCHEMA.md](03-DB-SCHEMA.md))
- **Tổng roles**: 5 CRM roles + 1 Student role (xem chi tiết tại [04-RBAC-SECURITY.md](04-RBAC-SECURITY.md))
